<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Bash 教程 on Facsert</title><link>https://facsert.github.io/categories/bash-%E6%95%99%E7%A8%8B/</link><description>Recent content in Bash 教程 on Facsert</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Mon, 10 Jul 2023 21:20:45 +0000</lastBuildDate><atom:link href="https://facsert.github.io/categories/bash-%E6%95%99%E7%A8%8B/index.xml" rel="self" type="application/rss+xml"/><item><title>Bash 字符串</title><link>https://facsert.github.io/p/bash-%E5%AD%97%E7%AC%A6%E4%B8%B2/</link><pubDate>Mon, 10 Jul 2023 21:20:45 +0000</pubDate><guid>https://facsert.github.io/p/bash-%E5%AD%97%E7%AC%A6%E4%B8%B2/</guid><description>&lt;h2 id="介绍">介绍&lt;/h2>
&lt;p>Bash 所有代码除关键字外默认为字符串&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">command&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;date&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">$command&lt;/span> &lt;span class="c1"># 取 command 变量值 &amp;#34;date&amp;#34;, &amp;#34;date&amp;#34; 作为命令执行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; Mon Jun &lt;span class="m">12&lt;/span> 10:07:40 CST &lt;span class="m">2023&lt;/span> &lt;span class="c1"># 执行 date, 打印日期&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> date &lt;span class="c1"># date 被当作字符串, 作为 echo 的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; date
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="k">$(&lt;/span>&lt;span class="s2">&amp;#34;date&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span> &lt;span class="c1"># 执行 &amp;#34;date&amp;#34;, 返回值作为 echo 的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; Mon Jun &lt;span class="m">12&lt;/span> 10:23:46 CST &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>Bash 默认第一个字符为指令, 后续值为字符串作为指令的参数&lt;/p>
&lt;h3 id="长度">长度&lt;/h3>
&lt;p>&lt;code>${#s}&lt;/code> 返回字符串的长度&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">s&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;123 456&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nv">s&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;456 123&amp;#34;&lt;/span> &lt;span class="c1"># 赋值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;s:&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">s&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2"> length: &lt;/span>&lt;span class="si">${#&lt;/span>&lt;span class="nv">s&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="c1"># 获取长度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; s:456 &lt;span class="m">123&lt;/span> length: &lt;span class="m">7&lt;/span> &lt;span class="c1"># 打印&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="子字符串">子字符串&lt;/h3>
&lt;p>&lt;code>${s:start:length}&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ &lt;span class="nv">s&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;01234&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">$ &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">s&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nv">0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="nv">3&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="c1"># 从序号 0 开始, 获取 3 个长度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; &lt;span class="m">012&lt;/span> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="删除和替换">删除和替换&lt;/h2>
&lt;p>字符串通过 &lt;code>#(开头开始匹配) %(结尾开始匹配)&lt;/code> 完成删除或替换操作&lt;br>
删除: &lt;code>${variable#pattern} ${variable##pattern} ${variable%pattern} ${variable%%pattern}&lt;/code>
替换: &lt;code>${variable/pattern/string} ${variable//pattern/string}&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nv">date&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2023-07-31&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">date&lt;/span>&lt;span class="p">#*-&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">date&lt;/span>&lt;span class="p">##*-&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># # 从开头开始匹配, 只匹配最短内容 ## 贪婪匹配&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; 07-31 &lt;span class="m">31&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">date&lt;/span>&lt;span class="p">%-*&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">date&lt;/span>&lt;span class="p">%%-*&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># % 从结尾开始匹配, 只匹配最短内容 %% 贪婪匹配&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; 2023-07 &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">date&lt;/span>&lt;span class="p">/-/=&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># 只替换一次 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="nv">2024&lt;/span>&lt;span class="o">=&lt;/span>07-31
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">date&lt;/span>&lt;span class="p">//-/=&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># 全替换&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="nv">2023&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">07&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">01&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="大小写">大小写&lt;/h2>
&lt;p>&lt;code>${variable^^}&lt;/code> 字母全替换为大写&lt;br>
&lt;code>${variable,,}&lt;/code> 字母全替换为小写&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nv">var&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;ABC123xyz&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">var&lt;/span>&lt;span class="p">^^&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; ABC123XYZ
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">var&lt;/span>&lt;span class="p">,,&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; abc123xyz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Bash 控制流</title><link>https://facsert.github.io/p/bash-%E6%8E%A7%E5%88%B6%E6%B5%81/</link><pubDate>Sun, 21 Aug 2022 22:24:10 +0000</pubDate><guid>https://facsert.github.io/p/bash-%E6%8E%A7%E5%88%B6%E6%B5%81/</guid><description>&lt;h2 id="if-分支">if 分支&lt;/h2>
&lt;p>if 分支是 shell 中的最常见的分支&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &amp;lt;expression&amp;gt; &lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="c1"># expression 返回值为 0 表示条件成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> commands &lt;span class="c1"># 表达式成立才会执行 command&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="m">3&lt;/span> &amp;gt; &lt;span class="m">2&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="c1"># 3 &amp;gt; 2 条件成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34; 3 bigger thean 2\n&amp;#34;&lt;/span> &lt;span class="c1"># 执行打印&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="k">if&lt;/span> date&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">fi&lt;/span> &lt;span class="c1"># 命令执行成功也表示条件成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; Mon Aug &lt;span class="m">15&lt;/span> 21:03:03 CST &lt;span class="m">2022&lt;/span> &lt;span class="c1"># date 命令执行成功&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="nb">true&lt;/span> &lt;span class="c1"># 执行分支代码&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注: if 分支后的命令或表达式返回 0 表示 true, 条件成立, 其余值均表示 false 不成立&lt;/p>
&lt;h3 id="多重分支">多重分支&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &amp;lt;expression&amp;gt;&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="c1"># command 返回值为 0 表示条件成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> commands
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">elif&lt;/span> &amp;lt;expression&amp;gt;&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="c1"># if 不成立, 判断 elif &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> commands
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span> &lt;span class="c1"># if 和 elif 均不成立才执行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> commands
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> true&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="c1"># 命令执行成功表示条件成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;first if&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">elif&lt;/span> true&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span> &lt;span class="c1"># 上个 if 条件不成立才会执行判断&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;else if&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span> &lt;span class="c1"># 上述分支均不成立才会执行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;else&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt; first &lt;span class="k">if&lt;/span> &lt;span class="c1"># 执行第一个成立的 if 条件&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="表达式">表达式&lt;/h3>
&lt;p>表达式有很多形式, 数值或字符串比较需要使用括号包含&lt;br>
Linux 命令也可以作为表达式, 命令返回值 0 为 true, 返回值不为 0 为 false&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">test&lt;/span> &amp;lt; expression &amp;gt; &lt;span class="c1"># 常用作 if 判断的表达式, 与 [ expression ] 等价&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> expression &lt;span class="o">]&lt;/span> &lt;span class="c1"># 同上, 与 test 等价, 括号内空格是必须的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> expression &lt;span class="o">]]&lt;/span> &lt;span class="c1"># 较上述额外支持正则, 括号内空格是必须的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$USER&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;root&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;user is root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;not user root&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[[&lt;/span> &lt;span class="nv">$USER&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;root&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;user is root&amp;#34;&lt;/span> &lt;span class="c1"># &amp;amp;&amp;amp;(且) 表达式为 true 才会执行后半段&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[[&lt;/span> &lt;span class="nv">$USER&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;root&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;not user root&amp;#34;&lt;/span> &lt;span class="c1"># ||(或) 表达式为 false 才会执行后半段&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">true&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$?&lt;/span> &lt;span class="c1"># true 返回值为 0, 前半部分 true, 继续执行后半段 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">false&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$?&lt;/span> &lt;span class="c1"># false 返回值 1, 前半部分 false, 继续执行后半段&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注: 单括号需要注意变量引用为空导致命令报错或逻辑错误&lt;br>
&lt;code>[ $name == &amp;quot;bash&amp;quot; ]&lt;/code> 当 &lt;code>$name&lt;/code> 为空执行会报错&lt;/p>
&lt;h3 id="数值比较">数值比较&lt;/h3>
&lt;p>单中括号数值比较不支持 &lt;code>&amp;gt; &amp;lt; ==&lt;/code> 等符号, 使用 &lt;code>-eq -ne -lt -le -gt -ge&lt;/code> 代替&lt;br>
双中括号数值比较支持 &lt;code>&amp;gt; &amp;lt; ==&lt;/code> 符号也支持 &lt;code>-eq -ne -lt -le -gt -ge&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="m">3&lt;/span> -eq &lt;span class="m">3&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># equal 数值相等表示 true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="m">3&lt;/span> -ne &lt;span class="m">3&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># not equal 数值不相等表示 true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="m">3&lt;/span> -lt &lt;span class="m">3&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># less than 小于&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="m">3&lt;/span> -le &lt;span class="m">3&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># less equal 小于等于 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="m">3&lt;/span> -gt &lt;span class="m">3&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># greater than 大于&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="m">3&lt;/span> -ge &lt;span class="m">3&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># greater equal 大于等于&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="m">0&lt;/span> -ne &lt;span class="m">0&lt;/span> &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="m">3&lt;/span> &amp;gt; &lt;span class="m">2&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span> &lt;span class="c1"># 执行命令 &amp;#34;3&amp;#34; 结果写入 2 文件, 执行成功打印 true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注: 数值比较尽量不要使用 &lt;code>&amp;gt;&lt;/code> &lt;code>&amp;lt;&lt;/code> &lt;code>==&lt;/code>等符号, 使用双中括号和字符比较&lt;/p>
&lt;h3 id="字符串比较">字符串比较&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> -z &lt;span class="s2">&amp;#34;str&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># 字符串长度为 0 为 true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> -n &lt;span class="s2">&amp;#34;str&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># 字符串长度不为 0 为 true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;abc&amp;#34;&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;abc&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># 字符串相等为 true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;abc&amp;#34;&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;abc&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># 字符串不相等为 true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nv">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> &lt;span class="nv">$name&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;linux&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;no linux&amp;#34;&lt;/span> &lt;span class="c1"># name 为空, 从 == 开始执行, 报错&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; bash: &lt;span class="o">[&lt;/span>: &lt;span class="o">==&lt;/span>: unary operator expected
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[[&lt;/span> &lt;span class="nv">$name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;linux&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;no linux&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; no linux
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="文件比较">文件比较&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> -e file &lt;span class="o">]&lt;/span> &lt;span class="c1"># 文件存在为 true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> -d file &lt;span class="o">]&lt;/span> &lt;span class="c1"># 路径存在为 true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[[&lt;/span> ! -e file &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> touch file &lt;span class="c1"># 如果 file 不存在则创建 file&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[[&lt;/span> ! -d /root/path &lt;span class="o">]]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> mkdir -p /root/path &lt;span class="c1"># 如果路径不存在测创建路径&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="o">[&lt;/span> -f file &lt;span class="o">]&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> cat file &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;1st&amp;#34;&lt;/span> &amp;gt; file &lt;span class="c1"># file 存在则读取 file, 不存在则创建并写入 &amp;#34;1st&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; 1st
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="正则判断">正则判断&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> expression &lt;span class="o">]]&lt;/span> &lt;span class="c1"># 仅双括号支持正则表达式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;abc&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span>~ &lt;span class="s2">&amp;#34;b&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="c1"># true 判断 abc 是否包含 b &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;01:01:01&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span>~ &lt;span class="o">([&lt;/span>0-9&lt;span class="o">]{&lt;/span>2&lt;span class="o">}&lt;/span>&lt;span class="se">\:&lt;/span>&lt;span class="o">){&lt;/span>2&lt;span class="o">}[&lt;/span>0-9&lt;span class="o">]{&lt;/span>2&lt;span class="o">}&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="c1"># true 正则匹配时间格式, 正则表达式不能用引号包含&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> &lt;span class="s2">&amp;#34;10.0.0.1&amp;#34;&lt;/span> &lt;span class="o">=&lt;/span>~ &lt;span class="o">([&lt;/span>0-9&lt;span class="o">]{&lt;/span>1,3&lt;span class="o">}&lt;/span>&lt;span class="se">\.&lt;/span>&lt;span class="o">){&lt;/span>3&lt;span class="o">}[&lt;/span>0-9&lt;span class="o">]{&lt;/span>1,3&lt;span class="o">}&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="c1"># true 正则匹配 IPV4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="逻辑判断">逻辑判断&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> ! expression &lt;span class="o">]&lt;/span> &lt;span class="c1"># 单括号逻辑非&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> ! expression &lt;span class="o">]]&lt;/span> &lt;span class="c1"># 双括号逻辑非&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> &lt;span class="nb">true&lt;/span> -a &lt;span class="nb">true&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># true 单括号逻辑与&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> &lt;span class="nb">true&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">false&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="c1"># false 双括号逻辑与&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span> &lt;span class="nb">false&lt;/span> -o &lt;span class="nb">true&lt;/span> &lt;span class="o">]&lt;/span> &lt;span class="c1"># true 单括号逻辑或&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[[&lt;/span> &lt;span class="nb">false&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">true&lt;/span> &lt;span class="o">]]&lt;/span> &lt;span class="c1"># true 双括号逻辑或&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="逻辑运算">逻辑运算&lt;/h3>
&lt;h4 id="逻辑与">逻辑与&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">command&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">command&lt;/span> &lt;span class="c1"># 前一条命令成功才会执行后一条&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">true&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span> &lt;span class="c1"># true 返回值 0, 继续执行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">! &lt;span class="nb">false&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;not false&amp;#34;&lt;/span> &lt;span class="c1"># 前一条命令返回值 0, 继续执行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; not &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">command&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">command&lt;/span> &lt;span class="c1"># 前一条失败后才会继续执行后一条&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">false&lt;/span> &lt;span class="o">||&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;false&amp;#34;&lt;/span> &lt;span class="c1"># false 返回值 1, 执行下一条&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="switch">switch&lt;/h2></description></item><item><title>Bash 基础</title><link>https://facsert.github.io/p/bash-%E5%9F%BA%E7%A1%80/</link><pubDate>Tue, 09 Aug 2022 21:20:45 +0000</pubDate><guid>https://facsert.github.io/p/bash-%E5%9F%BA%E7%A1%80/</guid><description>&lt;p>&lt;a class="link" href="https://wangdoc.com/bash/" target="_blank" rel="noopener"
>BASH 教程&lt;/a>&lt;/p>
&lt;p>BASH 基础语法&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">command&lt;/span> &amp;lt;option&amp;gt; &amp;lt;args&amp;gt; &lt;span class="c1"># shell 命令一般格式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ cat -n log.txt &lt;span class="c1"># 读取 log.txt 文件, 命令 cat, 选项 -n, 参数 log.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="m">1&lt;/span> 1st
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="m">2&lt;/span> 2nd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="m">3&lt;/span> 3rd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">command&lt;/span> &lt;span class="p">|&lt;/span> &amp;lt;command&amp;gt; &lt;span class="p">|&lt;/span> &amp;lt;command&amp;gt; &lt;span class="c1"># 命令管道&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ cat log.txt &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;3rd&amp;#34;&lt;/span> &lt;span class="c1"># 管道前的值作为管道后命令的参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; 3rd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="打印输出">打印输出&lt;/h2>
&lt;h3 id="echohttpslinuxaliangacomcechohtml">&lt;a class="link" href="https://linux.alianga.com/c/echo.html" target="_blank" rel="noopener"
>echo&lt;/a>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &amp;lt;opt&amp;gt; &amp;lt;string&amp;gt; &lt;span class="c1"># 打印 string 内容, 不激活转义符号&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> -e &amp;lt;string&amp;gt; &lt;span class="c1"># 激活字符中的转义字符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;first \nsecond&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; first &lt;span class="se">\n&lt;/span>second
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> -e &lt;span class="s2">&amp;#34;first \nsecond&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; first
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; second
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注: 更多转义符号浏览 &lt;a class="link" href="#%e5%b8%b8%e7%94%a8%e8%bd%ac%e4%b9%89%e7%ac%a6%e5%8f%b7" >转义符号&lt;/a>&lt;/p>
&lt;h3 id="printfhttpslinuxaliangacomcprintfhtml">&lt;a class="link" href="https://linux.alianga.com/c/printf.html" target="_blank" rel="noopener"
>printf&lt;/a>&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">printf&lt;/span> &amp;lt;format string&amp;gt; &lt;span class="c1"># 格式化输出字符串&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;%s length is %.3f&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;line&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;4.53245&amp;#34;&lt;/span> &lt;span class="c1"># 字符串格式化 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; line length is 4.523
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">printf&lt;/span> &lt;span class="s2">&amp;#34;%-6s_%s&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;left&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;right&amp;#34;&lt;/span> &lt;span class="c1"># 默认右对齐, 带 - 左对齐, 数字表示占位&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; left _rightf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="变量引用">变量引用&lt;/h2>
&lt;p>BASH 只有字符串一种数据类型, 想要操作字符串或者引用变量需要使用特殊符号&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nv">variable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;hello world&amp;#34;&lt;/span> &lt;span class="c1"># 变量赋值, &amp;#39;=&amp;#39; 号前后不允许空格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nv">temp&lt;/span>&lt;span class="o">=&lt;/span>hello_world &lt;span class="c1"># 字符串无引号赋值时不允许空格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> variable &lt;span class="c1"># 把打印内容当做字符串直接打印 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; variable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$variable&lt;/span> &lt;span class="c1"># 打印变量的值 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; hello world
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> say_&lt;span class="si">${&lt;/span>&lt;span class="nv">temp&lt;/span>&lt;span class="si">}&lt;/span>_to_code &lt;span class="c1"># 字符连用时, 用 {} 区分变量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; say_hello_world_to_code
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>建议字符串操作时, 添加引号使变量操作更加明确(易于区分编辑器中字符串与变量)&lt;/p>
&lt;h2 id="引号">引号&lt;/h2>
&lt;h3 id="单引号与双引号">单引号与双引号&lt;/h3>
&lt;p>BASH 区分单引号和双引号, 单引号内全部为当做字符(转义符有效), 双引号会激活变量引用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nv">name&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;petter&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;hello\t$name&amp;#39;&lt;/span> &lt;span class="c1"># 单引号禁止变量名扩展, 原样打印&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; hello &lt;span class="nv">$name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;hello\t&lt;/span>&lt;span class="nv">$name&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="c1"># 双引号允许变量名扩展&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; hello petter
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="反引号">反引号&lt;/h3>
&lt;p>反引号用于执行命令, 一般用于将命令结果赋值给变量&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="sb">`&lt;/span>date&lt;span class="sb">`&lt;/span> &lt;span class="c1"># 将 data 命令结果赋值给 time&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$time&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> &lt;span class="c1"># 打印变量值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; Wed Aug &lt;span class="m">10&lt;/span> 21:49:38 HKT &lt;span class="m">2022&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>date&lt;span class="k">)&lt;/span> &lt;span class="c1"># 与反引号效果一致&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>由于反引号易于与单引号混淆, 建议使用 &lt;code>$()&lt;/code> 方式, 便于区分&lt;/p>
&lt;h2 id="变量">变量&lt;/h2>
&lt;h3 id="环境变量">环境变量&lt;/h3>
&lt;p>BASH 环境中的变量, 系统自定义的全局变量, 变量名全为大写, 用于保存环境信息&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ env &lt;span class="c1"># 显示所有环境变量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$HOME&lt;/span> &lt;span class="c1"># 打印用户目录&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; /home/facser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$PATH&lt;/span> &lt;span class="c1"># 运行环境目录组成的列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">export&lt;/span> &amp;lt;var&amp;gt;&lt;span class="o">=&lt;/span>&amp;lt;val&amp;gt; &lt;span class="c1"># 自定义环境变量, 新开窗口或重启失效&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">unset&lt;/span> &amp;lt;var&amp;gt; &lt;span class="c1"># 删除变量, 环境变量和自定义变量均可&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">set&lt;/span> &amp;lt;var&amp;gt; &lt;span class="c1"># 显示所有 shell 变量&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注: 更多环境变量浏览 &lt;a class="link" href="#%e5%b8%b8%e7%94%a8%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f" >环境变量&lt;/a>&lt;/p>
&lt;h3 id="自定义变量">自定义变量&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &amp;lt;var&amp;gt;&lt;span class="o">=&lt;/span>&amp;lt;val&amp;gt; &lt;span class="c1"># 变量定义, 等号两边不允许空格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ $&amp;lt;char&amp;gt; &lt;span class="c1"># 如 $? #! 等特殊含义变量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$?&lt;/span> &lt;span class="c1"># 上个命令返回值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="m">0&lt;/span> &lt;span class="c1"># 0 表示命令执行成功, 其它只表示失败或错误&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>注: 更多特殊变量 &lt;a class="link" href="#%e7%89%b9%e6%ae%8a%e5%8f%98%e9%87%8f" >特殊变量&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="si">${&lt;/span>&lt;span class="nv">variable&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="nv">value&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># 变量为空或不存在返回 value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="si">${&lt;/span>&lt;span class="nv">variable&lt;/span>&lt;span class="p">:+value&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># 变量存在且不为空返回 value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="si">${&lt;/span>&lt;span class="nv">variable&lt;/span>&lt;span class="p">:=value&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># 变量为空或不存在设置变量为 value, 返回 values&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="si">${&lt;/span>&lt;span class="nv">variable&lt;/span>&lt;span class="p">:?message&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="c1"># 变量为空或不存在打印 message, 并退出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;hello &lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">name&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="nv">petter&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; hello petter
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">declare&lt;/span> &amp;lt;opt&amp;gt; &amp;lt;var&amp;gt;&lt;span class="o">=&lt;/span>&amp;lt;val&amp;gt; &lt;span class="c1"># 定义特殊类型变量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">declare&lt;/span> -i &lt;span class="nv">int1&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">8&lt;/span> &lt;span class="nv">int2&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">6&lt;/span> sum &lt;span class="c1"># 定义整数变量, 可直接数学运算&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nv">sum&lt;/span>&lt;span class="o">=&lt;/span>int1*int2&lt;span class="p">;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="nv">$sum&lt;/span> &lt;span class="c1"># 声明整数变量可直接数学运算&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; &lt;span class="m">14&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">declare&lt;/span> -a &lt;span class="nv">arr&lt;/span>&lt;span class="o">=(&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="m">2&lt;/span> 3&lt;span class="o">)&lt;/span> &lt;span class="c1"># 定义数组变量&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">let&lt;/span> &amp;lt;var&amp;gt;&lt;span class="o">=&lt;/span>&amp;lt;expression&amp;gt; &lt;span class="c1"># 声明含算术表达式的变量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">let&lt;/span> &lt;span class="s2">&amp;#34;sum = 7 + 8&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">let&lt;/span> &lt;span class="s2">&amp;#34;add = sum++&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;sum: &lt;/span>&lt;span class="nv">$sum&lt;/span>&lt;span class="s2"> add: &lt;/span>&lt;span class="nv">$add&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; sum: &lt;span class="m">15&lt;/span> add: &lt;span class="m">16&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="输出重定向">输出重定向&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">command&lt;/span> 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="c1"># 1 表示标准输出 2 表示标准错误输出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; zsh: &lt;span class="nb">command&lt;/span> not found: data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">command&lt;/span> 2&amp;gt;/dev/null &lt;span class="c1"># 将错误写入 null, 即不显示错误&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">command&lt;/span> &amp;gt; file &lt;span class="c1"># 清空文件内容, 命令标准输出写入文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ date &amp;gt; log.txt&lt;span class="p">;&lt;/span> cat log.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; Mon Jul &lt;span class="m">3&lt;/span> 23:05:14 CST &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">command&lt;/span> &amp;gt;&amp;gt; file &lt;span class="c1"># 保留文件内容, 命令标准输出追加入文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ date &amp;gt;&amp;gt; log.txt&lt;span class="p">;&lt;/span> cat log.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; Mon Jul &lt;span class="m">3&lt;/span> 23:05:14 CST &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt; Mon Jul &lt;span class="m">3&lt;/span> 23:05:38 CST &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> $ &lt;span class="nb">command&lt;/span> &amp;gt; /dev/null &lt;span class="c1"># 命令标准输出写入 null, 即不显示正常结果&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="常用转义符号">常用转义符号&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">符号&lt;/th>
&lt;th style="text-align:left">含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>\n&lt;/code>&lt;/td>
&lt;td style="text-align:left">换行符&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>\r&lt;/code>&lt;/td>
&lt;td style="text-align:left">回车, 回到行首&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>\t&lt;/code>&lt;/td>
&lt;td style="text-align:left">Tab 键&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>\b&lt;/code>&lt;/td>
&lt;td style="text-align:left">光标左移 1 位&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="常用环境变量">常用环境变量&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">变量&lt;/th>
&lt;th style="text-align:left">含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>HOME&lt;/code>&lt;/td>
&lt;td style="text-align:left">当前用户目录&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>USER&lt;/code>&lt;/td>
&lt;td style="text-align:left">当前用户&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>SHELL&lt;/code>&lt;/td>
&lt;td style="text-align:left">当前使用的 shell&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>PATH&lt;/code>&lt;/td>
&lt;td style="text-align:left">环境变量&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>PWD&lt;/code>&lt;/td>
&lt;td style="text-align:left">当前目录&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="特殊变量">特殊变量&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">变量&lt;/th>
&lt;th style="text-align:left">含义&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$?&lt;/code>&lt;/td>
&lt;td style="text-align:left">上一个命令的返回值&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$!&lt;/code>&lt;/td>
&lt;td style="text-align:left">上一个命令的 pid&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$$&lt;/code>&lt;/td>
&lt;td style="text-align:left">当前 shell 进程&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>$@&lt;/code>&lt;/td>
&lt;td style="text-align:left">当前函数或脚本的所有参数&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item></channel></rss>